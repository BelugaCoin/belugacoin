<button style="display:inline-block; margin-bottom: 40px; margin: auto; border-radius: 4px; background-color: #00E8E8; color: white; border: none" id="btn-login">Connect</button> <button style="display:inline-block; margin-bottom: 40px; margin: auto; border-radius: 4px; background-color: #00E8E8; color: white; border: none" id="btn-logout">Logout</button> 
<script type="text/javascript" src="./main.js"></script><br>
<script>
   // main.js
   
   const serverUrl = "https://ovzy6hr0msy7.usemoralis.com:2053/server";
   const appId = "LD1TXn947y7U7Fww0yPHNRF6W5UtOSbJs6N9sbld";
   Moralis.start({ serverUrl, appId });
   
   /** Add from here down */
   async function login() {
     let user = Moralis.User.current();
     if (!user) {
      try {
         user = await Moralis.authenticate({ signingMessage: "Welcome to Beluga the Cat!" })
         console.log(user)
         console.log(user.get('ethAddress'))
         launch()
      } catch(error) {
        console.log(error)
      }
     }
   }
   
   async function logOut() {
     await Moralis.User.logOut();
     console.log("logged out");
           location.reload();
   }
   
   
   document.getElementById("btn-login").onclick = login;
   document.getElementById("btn-logout").onclick = logOut;
   
   
   var config = {
       type: Phaser.AUTO,
       width: 1200,
       height: 500,
           physics: {
           default: 'arcade',
           arcade: {
               gravity: { y: 300 },
               debug: false
           }
       },
       scene: {
           preload: preload,
           create: create,
           update: update
       }
   };
   
   var game;
   var platforms;
   var player;
   var cursor;
   
   function launch (){
                           
    let user = Moralis.User.current();
        if (!user) {
          console.log("PLEASE LOG IN WITH METAMASK")
        }
        else {
          console.log(user.get("ethAddress") + " " + "logged in")
          game = new Phaser.Game(config);
           }
                         
        launch();
           
           
   // loading assets
   function preload ()
   {
           this.load.image('background', 'BG.png');
           this.load.image('ground', '2.png');
           this.load.image('player', 'beluga1.png');
   }
   
   // initial setup
   function create ()
   {
           this.add.image(600, 250, 'background').setScale(2);
           
           platforms = this.physics.add.staticGroup();
           
           
           player = this.physics.add.sprite(600, 200, 'player');
           player.setBounce(0.3);
   player.setCollideWorldBounds(true);
   
           this.physics.add.collider(player, platforms);
           cursors = this.input.keyboard.createCursorKeys();
           
           
           platforms.create(1250, 568, 'ground').setScale(2).refreshBody();
           platforms.create(1000, 568, 'ground').setScale(2).refreshBody();
           platforms.create(750, 568, 'ground').setScale(2).refreshBody();
           platforms.create(500, 568, 'ground').setScale(2).refreshBody();
           platforms.create(250, 568, 'ground').setScale(2).refreshBody();
           platforms.create(0, 568, 'ground').setScale(2).refreshBody();
           
   
   }
   
   // 60 times per second
   function update ()
   {
           // LOGIC
           if (cursors.left.isDown)
   {
       player.setVelocityX(-160);
   
      
   }
   else if (cursors.right.isDown)
   {
       player.setVelocityX(160);
   
      
   }
   else
   {
       player.setVelocityX(0);
   
   }
   
   if (cursors.up.isDown && player.body.touching.down)
   {
       player.setVelocityY(-240);
   }
   }
</script>
